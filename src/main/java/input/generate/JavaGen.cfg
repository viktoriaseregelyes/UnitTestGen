PACKAGE com.badlogic.gdx.backends.android

IMPORT java.io.File
IMPORT java.io.IOException
IMPORT java.util.Vector
IMPORT android.content.Context
IMPORT android.os.Environment

CLASS APKExpansionSupport

FIELD String EXP_PATH

METHOD getAPKExpansionFiles
RETURN_TYPE String[]
PARAM Context ctx
PARAM int mainVersion
PARAM int patchVersion
EXPRESSION String packageName = ctx.getPackageName();
EXPRESSION Vector<String> ret = new Vector<String>();
IF_CONDITION Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED)
EXPRESSION File root = Environment.getExternalStorageDirectory();
EXPRESSION File expPath = new File(root.toString() + EXP_PATH + packageName);
IF_CONDITION expPath.exists()
IF_CONDITION mainVersion > 0
EXPRESSION String strMainPath = expPath + File.separator + "main." + mainVersion + "." + packageName + ".obb";
EXPRESSION File main = new File(strMainPath);
IF_CONDITION main.isFile()
EXPRESSION ret.add(strMainPath);
IF_CONDITION patchVersion > 0
EXPRESSION String strPatchPath = expPath + File.separator + "patch." + patchVersion + "." + packageName + ".obb";
EXPRESSION File main = new File(strPatchPath);
IF_CONDITION main.isFile()
EXPRESSION ret.add(strPatchPath);
EXPRESSION String[] retArray = new String[ret.size()];
EXPRESSION ret.toArray(retArray);
RETURN retArray

METHOD getResourceZipFile
RETURN_TYPE ZipResourceFile
PARAM String[] expansionFiles
EXPRESSION ZipResourceFile apkExpansionFile = null;
FOR_EACH_LOOP String expansionFilePath expansionFiles
IF_CONDITION null == apkExpansionFile
EXPRESSION apkExpansionFile = new ZipResourceFile(expansionFilePath);
ELSE_BLOCK_FOUND
EXPRESSION apkExpansionFile.addPatchFile(expansionFilePath);
RETURN apkExpansionFile

METHOD getAPKExpansionZipFile
RETURN_TYPE ZipResourceFile
PARAM Context ctx
PARAM int mainVersion
PARAM int patchVersion
EXPRESSION String[] expansionFiles = getAPKExpansionFiles(ctx, mainVersion, patchVersion);
RETURN getResourceZipFile(expansionFiles)
